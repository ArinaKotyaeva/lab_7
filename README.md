# Лабораторная работа 7 - Архитектура, слои и DDD-lite

Проект реализует систему оплаты заказа с разделением по слоям и доменной моделью.

## Структура проекта

- `domain/` - доменная модель и бизнес-правила
- `application/` - use-case и интерфейсы
- `infrastructure/` - реализации интерфейсов
- `tests/` - тесты use-case без базы данных

## Запуск тестов

```bash
python -m pytest tests/
```

или

```bash
python -m unittest discover tests
```

## Компоненты

### Domain
- `Order` - сущность заказа
- `OrderLine` - строка заказа (часть агрегата)
- `Money` - value object для денежных сумм
- `OrderStatus` - перечисление статусов заказа

### Application
- `PayOrderUseCase` - use-case оплаты заказа
- `OrderRepository` - интерфейс репозитория заказов
- `PaymentGateway` - интерфейс платежного шлюза

### Infrastructure
- `InMemoryOrderRepository` - реализация репозитория в памяти
- `FakePaymentGateway` - фейковый платежный шлюз

## Инварианты

- Нельзя оплатить пустой заказ
- Нельзя оплатить заказ повторно
- После оплаты нельзя менять строки заказа
- Итоговая сумма равна сумме строк

